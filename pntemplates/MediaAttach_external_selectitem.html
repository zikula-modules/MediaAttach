<!--[* $Id: *]-->
<!--[* Purpose of this template: popup selector for pnForm and Content integration *]-->

<!--[if $modules eq 0]-->
    <br />
    <br />
    <p class="centered">
        <!--[gt text="MediaAttach could not find a module, for which it has been activated. Please go to the module settings and activate MediaAttach for one or more modules of your choice."]-->
    </p>
<!--[else]-->

    <div id="<!--[$baseID]-->_preview" style="float: right; width: 300px; border: 1px dotted #a3a3a3; padding: .2em .5em; margin-right: 1em">
        <p><strong><!--[gt text="Information about this file"]--></strong></p>

        <!--[pnimg id="ajax_indicator" style="display: none" modname="core" set="icons/extrasmall" src="indicator_circle.gif" alt=""]-->
        <div id="<!--[$baseID]-->_previewcontainer">&nbsp;</div>
    </div>

    <br />
    <br />
    <!--[assign var="leftside" value=" style=\"float: left; width: 10em\""]-->
    <!--[assign var="rightside" value=" style=\"float: left\""]-->
    <!--[assign var="break" value=" style=\"clear: left\""]-->

    <p>
        <label for="<!--[$baseID]-->_did"<!--[$leftside]-->><!--[gt text="Module"]-->:</label>
        <select id="<!--[$baseID]-->_did" name="<!--[$baseID]-->_did" onchange="mediaAttach.itemSelector.onParamChanged()"<!--[$rightside]-->>
            <option value="0"><!--[gt text="All"]--></option>
        <!--[foreach item="currentdef" from=$definitions]-->
            <option value="<!--[$currentdef.did]-->"<!--[if $definitionid eq $currentdef.did]--> selected="selected"<!--[/if]-->><!--[pnmodgetinfo modname=$currentdef.modname info="displayname"]--> (<!--[$currentdef.modname]-->)&nbsp;</option>
        <!--[/foreach]-->
        </select>
        <br<!--[$break]--> />
    </p>
    <p>
        <label for="<!--[$baseID]-->_catid"<!--[$leftside]-->><!--[gt text="Category"]-->:</label>
        <!--[gt text="Choose Category" assign="lblDef"]-->
        <!--[selector_category category=$mainCategory name="`$baseID`_catid" field="id" defaultText=$lblDef editLink=false selectedValue=$catID]-->
        <br<!--[$break]--> />
    </p>
    <p>
        <label for="<!--[$baseID]-->_fileid"<!--[$leftside]-->><!--[gt text="File"]-->:</label>
        <select id="<!--[$baseID]-->_fileid" name="<!--[$baseID]-->" onchange="mediaAttach.itemSelector.onFileChanged()"<!--[$rightside]-->>
            <!--[foreach item="file" from=$files]--><!--[strip]-->
                <option value="<!--[$file.fileid]-->"<!--[if $selectedFileID eq $file.fileid]--> selected="selected"<!--[/if]-->>
                    <!--[$file.title]--> (<!--[$file.extension]-->)
                </option><!--[/strip]-->
            <!--[foreachelse]-->
                <option value="0"><!--[gt text="no uploads found"]--></option>
            <!--[/foreach]-->
        </select>
        <br<!--[$break]--> />
    </p>
    <p>
        <label for="<!--[$baseID]-->_sortby"<!--[$leftside]-->><!--[gt text="Sort by"]-->:</label>
        <select id="<!--[$baseID]-->_sortby" name="sortby" onchange="mediaAttach.itemSelector.onParamChanged()"<!--[$rightside]-->>
            <option value="date"<!--[if $sortby eq "date"]--> selected="selected"<!--[/if]-->><!--[gt text="date"]--></option>
            <option value="title"<!--[if $sortby eq "title"]--> selected="selected"<!--[/if]-->><!--[gt text="title"]--></option>
            <option value="module"<!--[if $sortby eq "module"]--> selected="selected"<!--[/if]-->><!--[gt text="module"]--></option>
            <option value="username"<!--[if $sortby eq "username"]--> selected="selected"<!--[/if]-->><!--[gt text="username"]--></option>
            <option value="filename"<!--[if $sortby eq "filename"]--> selected="selected"<!--[/if]-->><!--[gt text="filename"]--></option>
            <option value="filetype"<!--[if $sortby eq "filetype"]--> selected="selected"<!--[/if]-->><!--[gt text="filetype"]--></option>
            <option value="filesize"<!--[if $sortby eq "filesize"]--> selected="selected"<!--[/if]-->><!--[gt text="filesize"]--></option>
        </select>
        <select id="<!--[$baseID]-->_sortdir" name="sortdir" onchange="mediaAttach.itemSelector.onParamChanged()">
            <option value="asc"<!--[if $sortdir eq "asc"]--> selected="selected"<!--[/if]-->><!--[gt text="ascending"]--></option>
            <option value="desc"<!--[if $sortdir eq "desc"]--> selected="selected"<!--[/if]-->><!--[gt text="descending"]--></option>
        </select>
        <br<!--[$break]--> />
    </p>
    <p>
        <label for="<!--[$baseID]-->_filterby"<!--[$leftside]-->><!--[gt text="Filter by"]-->:</label>
        <input type="text" id="<!--[$baseID]-->_filterby" name="searchfor"<!--[$rightside]--> />
        <input type="button" id="MediaAttach_gosearch" name="gosearch" value="<!--[gt text="Search"]-->" onclick="mediaAttach.itemSelector.onParamChanged()" onkeypress="mediaAttach.itemSelector.onParamChanged()" />
        <br<!--[$break]--> />
    </p>

    <br />
    <br />

    <script type="text/javascript" language="javascript">
    /* <![CDATA[ */
        Event.observe(window, 'load', function() {
            mediaAttach.itemSelector.onLoad('<!--[$baseID]-->', <!--[$selectedFileID|default:0]-->);
        });
    /* ]]> */
    </script>
<!--[/if]-->
